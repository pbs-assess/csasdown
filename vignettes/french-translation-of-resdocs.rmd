---
title: "Translating Resdocs from Enlish to French"
output: rmarkdown::html_vignette
date: "This document was rendered on `r hake::curr_time_date()`"
vignette: >
  %\VignetteIndexEntry{Translating Resdocs from Enlish to French}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup, echo = FALSE, message = FALSE, results = "hide", warning = FALSE}
library(csasdown)
```

Methods used to date include:

1. Compile the English version as a Microsoft Word document and then send it for translation to official government translation services.

2. Create a second directory containing a complete copy of the document source, then modify the English paragraphs to be French and change the Figures and tables into French versions.

There are several problems with these methods:

1. Sending a Word document out for translation poses several problems including cut-and-paste formatting issues and re-generation of all plots in French in some non-standardized way. The author must paste each French plot and/or table into the Word document manually or create a hybrid English text/Frech figures document to send out for translation. This causes a messy repository left in an unknown state, and zero reproducibility for the French version of the documnent.

2. Creating a second directory with an entirely separate document is prone to error when something changes in the document (for example axis limits on a plot or plot type from a histogram to a line plot) and you have to remember to change both the English version and the French version in exactly the same way. This is extremely prone to error and ending up with two documents which are not quite the same. In addition this method has to be repeated from scratch for a new assessment document. 
The method presented here and which is built into the ***csasdown*** package ensures that you have one single document which is compilable in both English and French, with a toggle found in the YAML header.

## Creating a document from scratch

If you are just starting a Research Document, use the **resdoc-b** draft of csasdown as it contains both English and French chunks already set up to start you off. To do that, run `csasdown::draft(“resdoc-b”)` in an empty directory.

To have a French-compilable document You **MUST** use `cat()` statements inside all knitr chunks (both English and French) in the `*.rmd` files. All English chunks must have a name that ends in -en as in the following example:

````{verbatim}
```{r length-data-en, eval = !fr(), results = 'asis'}
cat("### Length data

Paragraphs on length data go here.

")
```
````

The corresponding French chunk must have the same root name (**sam-length-data** in this case) but end in **-fr** instead of **-en** as show here:

````{verbatim}
```{r length-data-fr, eval = fr(), results = 'asis', needs_trans = FALSE}
cat(“### Données de longueur

Les paragraphes sur les données de longueur se trouvent ici.

“)
```
````

In the **resdoc-b** example document, the French chunks have a special value inside them. In this example is **<<sam-length-data-en>>**. This is called a mirror chunk reference and just tells knitr to mirror the English chunk text found inside the chunk with the name inside the **<<>>**. The above French chunk with a mirror reference looks like this:

````{verbatim}
```{r length-data-fr, eval = fr(), results = 'asis', needs_trans = TRUE}

<<sam-length-data-en>>
```
````

Note the knitr chunk option needs_trans is **FALSE** when the mirror chunk reference is present and **TRUE** when the translation is complete and has been pasted by you. It is up to you to change that value to **TRUE** when you have pasted the French translation in.

Once you translate, delete the mirror chunk reference, and place a `cat()` statement inside the French chunk and paste the translated French version of text found in the **sam-length-data-en** chunk into it, so it has the same format as the English chunk. You then change the knitr chunk option **needs_trans** to **FALSE**. If you forget to change **needs_trans** to **FALSE** you will receive a warning during compilation.

Change `french: false` to `french: true` in the YAML part of **index.rmd** here:

``` yaml
output:
 csasdown::resdoc_pdf:
   french: false
```

